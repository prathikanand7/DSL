grammar gameoflife.dsl.GameOfLifeDSL with org.eclipse.xtext.common.Terminals

generate gameOfLifeDSL "http://www.dsl.gameoflife/GameOfLifeDSL"

import "http://www.eclipse.org/emf/2002/Ecore" as ecore

Model:
    (grids += Grid)*
    (rules += Rules)?
;

Grid:
    'grid' name=ID '{'
        (liveCells += Cell)*
    '}'
;

Cell:
    'cell' '(' x=Coordinate ',' y=Coordinate ')'
;

Coordinate returns ecore::EInt:
    value=INT
;

Rules:
    'rules' '{'
        surviveRules += SurviveRule*
        birthRules += BirthRule*
    '}'
;

SurviveRule:
    'survive' 'when' neighbors=NeighborCondition
;

BirthRule:
    'birth' 'when' neighbors=NeighborCondition
;

NeighborCondition:
    count=Count
    | range=Range
;

Count returns ecore::EInt:
    value=INT
;

Range:
    '[' min=Count '..' max=Count ']'
;